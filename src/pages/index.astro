---
import MainLayout from "../layout/layout.astro";
import Navbar from "../sections/Navbar";
import HeroSection from "../sections/Hero.astro";
import AboutSection from "../sections/About.astro";
import TechStackSection from "../sections/TechStack.astro";
import FooterSection from "../sections/Footer.astro";
import BooksSection from "../sections/Books";
import ProjectsSection from "../sections/Projects";
import ContactSection from "../sections/Contact";
import { Projects } from "../content/projects";
import { Books } from "../content/books";
import { optimizeProjectsImages, optimizeBooksImages } from "../lib/optimizeImages";

const optimizedProjects = await optimizeProjectsImages(Projects);

const optimizedBooks = await optimizeBooksImages(Books);
---

<MainLayout title="André Portifolio" description="Portifolio de André Ximenes que mostra projetos e habilidades">
  <div
    class="bg-background text-textMain font-sans antialiased selection:bg-primary selection:text-white overflow-x-hidden"
  >
    <Navbar client:idle />
    <main>
      <HeroSection />
      <AboutSection />
      <TechStackSection />
      <ProjectsSection client:visible projects={optimizedProjects} />
      <BooksSection client:visible books={optimizedBooks} />
      <ContactSection client:visible />
    </main>
    <FooterSection />
  </div>
</MainLayout>
